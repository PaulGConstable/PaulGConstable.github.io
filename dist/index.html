<html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=description content="Neighbourhood Map Project"><meta name=author content="Paul Constable"><title>Paul Constable's Neighbourhood Map Project</title><style>
#search,.gm-style-iw,.rides-container,body{font-family:Bangers,impact}@font-face{font-family:Bangers;font-style:normal;font-weight:400;src:local('Bangers'),local('Bangers-Regular'),url(https://fonts.gstatic.com/s/bangers/v8/_Kq7Xa_aavBxPnttrBeaoQ.ttf) format('truetype')}html{font-size:100%;overflow-y:scroll;-webkit-tap-highlight-color:transparent;-ms-text-size-adjust:100%;-webkit-text-size-adjust:none}body{margin:0;font-size:16px;color:#fff}header{display:-webkit-flex;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;min-height:8%;width:100%;-webkit-box-shadow:0 0 4em #222;-moz-box-shadow:0 0 4em #222;box-shadow:0 0 4em #222;background-color:#2c3e50;color:#2c3e50;z-index:1;position:absolute}header p{font-size:20px;line-height:.5em}header img{border-radius:100%;border:2px solid #fff;max-width:45px;max-height:45px;margin:0 0 0 .3em}ul{padding:0}.header-flex-item{color:#fff;line-height:20px;text-transform:uppercase;padding:1em .5em .5em}#search{background:#464c53;border:0;float:right;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;display:block;margin-left:1em;padding-left:.5em;color:#fff;font-size:20px;min-height:48px}.menu-btn{visibility:hidden}.rides-container{border:2px solid #fff;background-color:#2c3e50;font-size:16px;color:#fff;min-width:17%;height:auto;padding-right:1em;padding-left:0;border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px;position:fixed;z-index:1;top:15%;left:2%}.nav-item{width:100%;padding:.5em;list-style-type:none;text-align:left;min-height:48px}.nav-item:focus,.nav-item:hover{background-color:#fff;color:#2c3e50}#map{min-height:92%;min-width:100%;background-color:#ccc;position:absolute;left:0;top:8%}.gm-style-iw{color:#000}.gm-style-mtc{display:none}@media only screen and (max-width:750px){.menu-btn,.rides-container{z-index:1;transition:transform .3s ease;top:15%}header p{font-size:18px}.name{display:none}.menu-btn{display:inline-block;visibility:visible;position:absolute;left:3%}.menu-btn svg{background-color:#2c3e50;padding:.1em;width:48px;height:48px;fill:#fff;border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px;border:2px solid #fff}.rides-container{position:fixed;margin-top:5em;transform:translate(-118%,0)}.rides-container.open{margin-top:5em;transform:translate(3%,0)}}
</style></head><body><header><div class="header-flex-item name"><p>Paul Constable</p></div><div class=header-flex-item><form><input id=search placeholder="Search my rides..." data-bind="textInput: cycleSearch"></form></div><div class=header-flex-item><a href="/"><picture><source media="(max-width: 480px)" srcset=img/profilepic.jpg><img src=img/profilepic.jpg alt="profile picture of Paul Constable"></picture></a></div></header><section><a id=menu class=menu-btn data-bind="click: mobileNavToggle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 6h20v3H2zm0 5h20v3H2zm0 5h20v3H2z"></path></svg></a></section><content><nav id=drawer class=rides-container data-bind="click: mobileNavToggle"><ul data-bind="foreach: cycleFiltered"><li data-bind="text: name, click: $parent.displayRide" class=nav-item></li></ul></nav><div id=map></div></content><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUM4HyJsHOv2ZZZSX8PLv9CPhcaVIQKTs&libraries=geometry&amp&callback=viewModel" async defer>
	</script><script src=js/libs/knockout-3.4.0.js async defer></script><script src=js/libs/jquery-1.12.1.min.js async defer></script><script async="defer=">
var favLocations=[{name:"Hadlow College, Tonbridge",lat:51.223217,lng:.331976,stravaID:127445893},{name:"Channel 4, London",lat:51.496026,lng:-.132962,stravaID:150243926},{name:"Olympic Park, London",lat:51.546307,lng:-.020001,stravaID:359827471},{name:"Amsterdam, Netherlands",lat:52.361212,lng:4.878265,stravaID:168304053},{name:"Dieppe, France",lat:49.933543,lng:1.08905,stravaID:151990703}],markers=function(e){this.name=ko.observable(e.name),this.lat=ko.observable(e.lat),this.lng=ko.observable(e.lng),this.stravaID=ko.observable(e.stravaID),this.marker=ko.observable()},viewModel=function(e){var a=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(51.45021,2.180518),zoom:6}),t=this;this.locationList=ko.observableArray([]),this.cycleSearch=ko.observable(""),t.cycleFiltered=ko.pureComputed(function(){var e=t.cycleSearch().toLowerCase(),a=document.getElementById("drawer");return e?(a.classList.add("open"),ko.utils.arrayFilter(t.locationList(),function(a){return a.name().toLowerCase().indexOf(e)>-1})):t.locationList()}),favLocations.forEach(function(e){t.locationList.push(new markers(e))});var o,n,i=new google.maps.InfoWindow;this.locationList().forEach(function(e){function t(){null!==e.marker.getAnimation()?e.marker.setAnimation(null):e.marker.setAnimation(google.maps.Animation.BOUNCE)}o=new google.maps.Marker({position:new google.maps.LatLng(e.lat(),e.lng()),map:a,title:e.name(),animation:google.maps.Animation.DROP});var r="https://www.strava.com/api/v3/activities/"+e.stravaID()+"?per_page=200&access_token=01d55b235d8b40e4733bc5b843c2d61c5e13911a";$.ajax({url:r,dataType:"jsonp",jsonp:"callback",success:function(a){e.routeMap=a.map.polyline,e.distance=.000621371192*a.distance,e.time=a.moving_time/3600,e.speed=2.23693629*a.average_speed,e.url="http://www.strava.com/activities/"+a.id},error:function(){console.log("Strava data could not be loaded")}}),e.marker=o,e.marker.addListener("click",function(){t(),i.setContent('<div class="info-content"><h1>'+e.name()+'</h1><div class="body-content"><p>Cycle distance: '+e.distance.toFixed(2)+" miles</p><p>Average speed: "+e.speed.toFixed(2)+"mph</p><p>Rough Moving Time: "+e.time.toFixed(0)+' hours</p><p></b><a href="'+e.url+'">See ride on Strava</a></b></p></div></div>'),i.open(a,e.marker),google.maps.event.addListener(i,"closeclick",function(){n.setMap(null),e.marker.setAnimation(null)}),a.setZoom(8),a.setCenter(e.marker.getPosition());var o=google.maps.geometry.encoding.decodePath(e.routeMap);n=new google.maps.Polyline({path:o,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:5,map:a})})}),this.displayRide=function(e){google.maps.event.trigger(e.marker,"click",{})},this.mobileNavToggle=function(e){var a=document.querySelector("#menu"),t=document.querySelector("content"),o=document.querySelector(".rides-container"),n=document.getElementById("drawer");a.addEventListener("click",function(e){o.classList.toggle("open")}),t.addEventListener("click",function(){o.classList.remove("open")}),n.classList.remove("open")}};ko.applyBindings(new viewModel);
</script></body></html>